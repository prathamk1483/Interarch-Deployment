<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Invoice Template</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
      <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
      /* General Styles */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f9f9f9;
        color: #333;
      }

      .invoice-container {
        max-width: 800px;
        margin: 0 auto;
        background: #fff;
        padding: 20px;
        border: 1px solid #ddd;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      .nav {
        top: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: nowrap;
        position: relative;
        overflow: hidden;
        height: 100px;
      }

      .background-shape {
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #ececec;
        z-index: 0;
        clip-path: polygon(
          100% 0,
          100% 16%,
          45% 16%,
          30% 100%,
          0 100%,
          0% 60%,
          0 0
        );
      }

      .right {
        display: flex;
        align-items: center;
        color: white;
        z-index: 1;
        height: 100%;
        justify-content: center;
        width: 27%;
      }

      #logo {
        margin-left: 15%;
        height: 40%;
      }

      span {
        font-size: 10px;
        display: block;
        text-align: center;
        margin-right: 10px;
      }

      .left {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        flex-wrap: nowrap;
        z-index: 1;
        height: 100%;
        width: 50%;
      }

      .container {
        display: flex;
        text-align: center;
        color: black;
        flex-direction: column;
        justify-content: center;
      }

      .services-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 35px;
        padding: 10px 0;
        font-weight: 600;
        font-size: 13px;
        background-color: #ececec;
        border-bottom: 1px solid #e0dcd9;
        font-family: 'Segoe UI', sans-serif;
        color: #a54242;
      }

      .services-bar span {
        cursor: default;
        transition: color 0.3s ease;
      }

      /* Invoice Styles */
      h2 {
        color: #6c2626;
        border-bottom: 2px solid #6c2626;
        padding-bottom: 5px;
        margin-top: 30px;
      }

      .section {
        margin-bottom: 20px;
      }

      .section p {
        margin: 10px 0;
      }

      .section strong {
        display: inline-block;
        width: 150px;
        font-weight: bold;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      .table th,
      .table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
      }

      .table th {
        background-color: #6c2626;
        color: white;
      }

      .table tr:nth-child(even) {
        background-color: #f2f2f2;
      }

      .footer {
        text-align: center;
        margin-top: 30px;
        font-size: 0.9em;
        color: #777;
      }

      .TAC {
        padding-left: 20px;
        font-size: medium;
      }
      .watermark {
  position: fixed;
  top: 60%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 0; /* Push it behind the content */
  opacity: 0.1;
  pointer-events: none; /* Let clicks go through */
}
      @media print {
        .plot-container {
          position: relative;
          overflow: hidden; /* keep labels within boundary */
        }

        .label {
          max-width: 100px;
          font-size: 9px;
          /* z-index: 10; */
        }
        .label {
          max-width: 100px;
          overflow-wrap: break-word;
          box-sizing: border-box;
        }
        .northArrow {
          max-height: 60px;
          z-index: 5;
        }
        .pagedivider {
          page-break-before: always;
        }

        /* Prevent blank first page */
        .pagedivider:first-child {
          page-break-before: auto;
        }
        body {
          background-color: #fff;
          color: #000;
          -webkit-print-color-adjust: exact; /* Force Chrome to print background colors */
          print-color-adjust: exact; /* Standard property for modern browsers */
        }

        .background-shape {
          background-color: #ececec !important; /* Ensure the background color is applied */
          clip-path: polygon(
            100% 0,
            100% 16%,
            33% 16%,
            27% 100%,
            0 100%,
            0% 60%,
            0 0
          );
          z-index: 0;
        }

        .invoice-container {
          box-shadow: none;
          border: none;
          padding: 0;
        }
        .section {
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }

        .invoice-container {
          page-break-inside: auto;
        }
        .no-print{
          display: none;
        }
        h2,
        h5 {
          page-break-after: avoid;
          break-after: avoid;
        }

        table,
        tr,
        td,
        th {
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }
      }
      #paymentDetails {
        break-inside: avoid;
        break-after: avoid;
        break-before: avoid;
      }

      .plot-container {
        position: relative;
        margin: 40px auto;
        padding: 0; /* No padding if labels stick to inner edge */
        overflow: visible;
        box-sizing: border-box;
      }

      .northArrow {
        position: absolute;
        bottom: 45px;
        left: 45px;
        height: 75px;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .label {
        position: absolute;
        font-weight: bold;
        background: white;
        padding: 2px 5px;
        font-size: 10px;
        white-space: nowrap;
        transform: translate(-50%, -50%);
        /* display: none; */
        max-width: 100px;
        overflow-wrap: break-word;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.1);
      }
      .info-row {
          display: flex;
          align-items: flex-start;
          margin-bottom: 10px;
          flex-wrap: wrap;
        }

        .info-row .labelh {
          font-weight: bold;
          min-width: 150px; /* or whatever fits best */
          margin-right: 10px;
          color: #000;
        }

        .info-row .value {
          flex: 1;
          word-break: break-word;
          white-space: pre-wrap;
        }
        .plot-container { position: relative; }

.label {
  position: absolute;
  background: white;
  padding: 2px 5px;
  font-size: 10px;
  white-space: nowrap;
  transform: translate(-50%, -50%);
  box-sizing: border-box;
  opacity: 0;
  transition: top 1.5s ease, left 1.5s ease, opacity 1.5s ease-in-out;
}
.label.show {
  opacity: 1;
}

/* CARDINAL */
.label.north { top: -3%;        left: 50%;  transform: translate(-50%, -100%); }
.label.east  { top: 50%;      right: -3%;    transform: translate(100%, -50%);  }
.label.south { bottom: -3%;     left: 50%;  transform: translate(-50%, 100%);  }
.label.west  { top: 50%;      left: -3%;     transform: translate(-100%, -50%); }

/* DIAGONAL */
.label.northeast { top:-3%;        right: 0;    transform: translate(100%, -100%); }
.label.southeast { bottom: -3%;     right: 0;    transform: translate(100%, 100%);   }
.label.southwest { bottom: 0;     left: -3%;     transform: translate(-100%, 100%);  }
.label.northwest { top: 0;        left: -3%;     transform: translate(-100%, -100%); }

    </style>
  </head>
  <body>
    {% load custom_filters %}
    <div class="watermark">
      <img src="https://res.cloudinary.com/interarchfiles/image/upload/v1746786710/logo_czchp4.png" alt="Watermark" />
    </div>
    <button
      id="printButton"
      class="btn btn-success btn-lg"
      style="margin-left: 80%; position: fixed"
      onclick="printInvoice()"
    >
      Print
    </button>
    <div class="invoice-container">
      <div class="pageDivider">
        <div class="nav">
          <div class="background-shape"></div>
          <div class="right">
            <img
              id="logo"
              src="https://res.cloudinary.com/interarchfiles/image/upload/v1746786710/logo_czchp4.png"
              alt="Interarc Logo"
              style="height: 80px;"
            />
          </div>
          <div class="left">
            <div class="container">
              <i class="fa fa-envelope"></i>
              <span>sandeep.shinde90@gmail.com</span>
            </div>
            <div class="container">
              <i class="fa fa-phone"></i>
              <span>7030322009</span>
            </div>
            <div class="container">
              <i class="fa fa-map-marker"></i>
              <span>Spine City,Bhosari</span>
            </div>
          </div>
        </div>
        <div class="services-bar">
          <span>Architecture</span>
          <span>3D Visualizer</span>
          <span>Landscape</span>
          <span>Interior</span>
          <span>वास्तुशास्त्र तज्ञ</span>
        </div>
        <!-- Customer Details -->
        <div class="section">
          <h2>Customer Details</h2>
          <div class="info-row">
            <div class="labelh">Name:</div>
            <div class="value">{{ data.name }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Phone:</div>
            <div class="value">{{ data.PhoneNo }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Emails:</div>
            <div class="value">{{ data.email }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Referred By:</div>
            <div class="value">{{ data.referredBy }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Profile Created:</div>
            <div class="value">{{ data.ProfileCreated }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Last Updated :</div>
            <div class="value">{{ data.ProfileLastUpdated }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Documents :</div>
            <div id="qrContainer"></div>
          </div>
        </div>

        <!-- Address -->
        <div class="section">
          <h2>Address</h2>
          <div class="info-row">
            <div class="labelh">Complete Address:</div>
            <div class="value">{{ data.Address.completeAddress }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">City:</div>
            <div class="value">{{ data.Address.city }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">State:</div>
            <div class="value">{{ data.Address.state }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Pincode:</div>
            <div class="value">{{ data.Address.pincode }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Landmark:</div>
            <div class="value">{{ data.Address.landmark }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Plot Number:</div>
            <div class="value">{{ data.plotDetails.plotNumber }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Plot Area:</div>
            <div class="value">{{ data.plotDetails.plotArea }}</div>
          </div>
          <div class="info-row">
            <div class="labelh">Plot Dimensions :</div>
            <div class="value">{{data.plotDetails.plotDimensions.east }} (east) x {{data.plotDetails.plotDimensions.west }} (west) X {{data.plotDetails.plotDimensions.north }} (north) X {{data.plotDetails.plotDimensions.south }} (south)
            </div>
          </div>
        </div>
      </div>

      <div class="pagedivider">
        <!-- Planning  -->
        <div class="section">
          <h2>Plot Details</h2>

          <label id="shapeLabel" for="shape">Choose a shape:</label>
          <select id="shape" name="shape" onchange="toggleShape()">
            <option value="square">Square</option>
            <option value="rectangle">Rectangle</option>
          </select>
          <label id="directionCountLabel" for="directionCount" style="margin-left:10px;">Show directions:</label>
          <select id="directionCount" style="margin-bottom:10px;">
            <option value="4" selected>4‑cardinal</option>
            <option value="8">8‑compass</option>
          </select>
          <h6>★ - Road Direction</h6>
          <!-- Rectangle Container -->
          <div
            id="rectangleContainer"
            class="plot-container"
            style="height: 400px; width: 80%; border: 2px solid black"
          >
            <img
              id="arrow1"
              class="northArrow"
              src="https://res.cloudinary.com/interarchfiles/image/upload/v1746620020/Screenshot_2025-05-07_174325_f8fgoj.png"
              alt="NorthArrow"
              style="bottom: 30px;"
            />
            <!-- Labels -->
            <div id="northLabel1" class="label">
              North: {{ data.plotDetails.plotDimensions.north }}
            </div>
            <div id="eastLabel1" class="label">
              East: {{ data.plotDetails.plotDimensions.east }}
            </div>
            <div id="southLabel1" class="label">
              South: {{ data.plotDetails.plotDimensions.south }}
            </div>
            <div id="westLabel1" class="label">
              West: {{ data.plotDetails.plotDimensions.west }}
            </div>
            <div id="northeastLabel1" class="label">NE: {{ data.plotDetails.plotDimensions.northeast }}</div>
            <div id="southeastLabel1" class="label">SE: {{ data.plotDetails.plotDimensions.southeast }}</div>
            <div id="southwestLabel1" class="label">SW: {{ data.plotDetails.plotDimensions.southwest }}</div>
            <div id="northwestLabel1" class="label">NW: {{ data.plotDetails.plotDimensions.northwest }}</div>
          </div>

          <!-- Square Container -->
          <div
            id="squareContainer"
            class="plot-container"
            style="height: 500px; width: 500px; border: 2px solid black"
          >
            <img
              id="arrow2"
              class="northArrow"
              src="https://res.cloudinary.com/interarchfiles/image/upload/v1746620020/Screenshot_2025-05-07_174325_f8fgoj.png"
              alt="NorthArrow"
            />
            <!-- Labels -->
            <div id="northLabel2" class="label">
              North: {{ data.plotDetails.plotDimensions.north }}
            </div>
            <div id="eastLabel2" class="label">
              East: {{ data.plotDetails.plotDimensions.east }}
            </div>
            <div id="southLabel2" class="label">
              South: {{ data.plotDetails.plotDimensions.south }}
            </div>
            <div id="westLabel2" class="label">
              West: {{ data.plotDetails.plotDimensions.west }}
            </div>
            <div id="northeastLabel2" class="label">NE: {{ data.plotDetails.plotDimensions.northeast }}</div>
            <div id="southeastLabel2" class="label">SE: {{ data.plotDetails.plotDimensions.southeast }}</div>
            <div id="southwestLabel2" class="label">SW: {{ data.plotDetails.plotDimensions.southwest }}</div>
            <div id="northwestLabel2" class="label">NW: {{ data.plotDetails.plotDimensions.northwest }}</div>

          </div>

          <div class="notes" style="display: block; height: auto">
            <h5>Notes -</h5>
          </div>
        </div>
      </div>
      <div class="pagedivider">
        <!-- Client Requirements -->
        <div class="section">
          <h2>Client Requirements</h2>

          <p><strong>Requirements:</strong> {{ data.clientRequirements }}</p>
          <h5>Notes -</h5>
          <div
            class="container"
            style="
              display: block;
              height: 250px;
              width: 80%;
              align-self: center;
              margin: 0 auto;
            "
          ></div>
          <!-- <div class="notes" style="display: block; height: 50px"></div> -->
        </div>

        <!-- Services -->
        <div class="section">
          <h2>Services</h2>
          <table class="table">
            <thead>
              <tr>
                <th>Service</th>
                <th>Status</th>
                <th>Detail</th>
              </tr>
            </thead>
            <tbody>
              {% for key, value in data.Services.services.items %}
              <tr>
                <td>{{ key }}</td>
                <td>{% if value %}Yes{% else %}No{% endif %}</td>
                <td>{{ data.Services.details|get_item:key }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="pagedivider">
        <!-- Payment Details -->
      <div id="paymentDetails" class="section">
        <h2>Payment Details</h2>
        <p>
          <strong>Original Amount:</strong> {{data.paymentDetails.totalAmountPaid}}
        </p>
        <p>
          <strong>Discount Amount:</strong> {{data.paymentDetails.discountAmount}}
        </p>
        <p>
          <strong>Total Payable Amount:</strong>
          {{data.paymentDetails.totalPayableAmount }}
        </p>
        <p>
          <strong>Advanced Paid:</strong>
          {{data.paymentDetails.advancePaid }}
        </p>
        <p>
          <strong>Total Amount Paid:</strong>
          {{data.paymentDetails.totalAmountPaid }}
        </p>
        <p>
          <strong>Total Amount Remaining:</strong>
          <strong>{{ data.paymentDetails.totalAmountDue }} </strong>
        </p>
        <table class="table" id="paymentDetailsTable">
          <thead>
            <tr>
              <th>Payment Mode</th>
              <th>Status</th>
              <th>Date</th>
              <th>Amount</th>
            </tr>
          </thead>
          <tbody>
            {% for payment in data.paymentDetails.transactions %}
            <tr>
              <td>{{payment.mode}}</td>
              <td>{{payment.paymentStatus}}</td>
              <td>{{payment.paymentDate}}</td>
              <td>{{payment.amountPaid}}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% if data.specialNotes %}
      <div class="pagedivider">
        <h2>Special Notes</h2>
        <pre>{{data.specialNotes | safe}}
        </pre>
      </div>
      {% endif %}
      <div class="section">
        <h2>Terms & Conditions</h2>
        <h6><b>1.Pre-Visit Consultation </b></h6>
        <p class="TAC">
          All discussions and agreements related to the site visit must be
          finalized beforehand. Any additional requirements or changes requested
          during the visit may be subject to separate charges.
        </p>
        <br />
        <h6><b>2.Payment Terms</b></h6>
        <p class="TAC">
          Full payment (100% of the total amount) is required before the final
          handover of data. No data or deliverables will be provided until the
          complete payment has been received.
        </p>
        <br />
        <h6><b>3.Advance Payment Requirement</b></h6>
        <p class="TAC">
          An advance payment of 20% of the total quoted amount is mandatory
          before initiating any work. This advance secures the project
          commencement and is non-refundable unless otherwise agreed upon in
          writing.
        </p>
      </div>
      <!-- Footer -->
      <div class="footer">
        <p>Thank you for choosing our services!</p>
        <p>For any queries, contact us at support@example.com</p>
      </div>
      </div>
    </div>
    <script>

      const dirCountSelect = document.getElementById("directionCount");
      function printInvoice() {
  const elementsToHide = [
    "printButton",
    "shapeLabel",
    "shape",
    "directionCountLabel",
    "directionCount"
  ];

  // Add `no-print` class before printing
  elementsToHide.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.classList.add("no-print");
  });

  window.print();

  // Optional: remove class after printing (if you want it to revert)
  setTimeout(() => {
    elementsToHide.forEach(id => {
      const el = document.getElementById(id);
      if (el) el.classList.remove("no-print");
    });
  }, 1000); // Delay to ensure printing is triggered
}
      function toggleShape() {
        const shape = document.getElementById("shape").value;
        const rectangle = document.getElementById("rectangleContainer");
        const square = document.getElementById("squareContainer");

        if (shape === "square") {
          square.style.display = "block";
          rectangle.style.display = "none";
        } else {
          rectangle.style.display = "block";
          square.style.display = "none";
        }
      }

      // Optional: Trigger on page load
      window.onload = toggleShape;

      function setupRotatingArrow(arrowId, containerId, labelIds) {
  const arrow      = document.getElementById(arrowId);
  const container  = document.getElementById(containerId);

  // map labelKeys → element
  const labels = {};
  Object.keys(labelIds).forEach(key => {
    labels[key] = document.getElementById(labelIds[key]);
  });

  const allDirs = [
    "north","northeast","east","southeast",
    "south","southwest","west","northwest"
  ];
  let rotationIndex = 0;

  const updateLabelPositions = () => {
    const mode = document.getElementById("directionCount").value; // "4" or "8"
    const rect = container.getBoundingClientRect();
    const cx = rect.width/2, cy = rect.height/2;

    const offset = 4; // small padding from edge
    const positions = {
      north:      { x: cx,           y: offset },
      northeast:  { x: rect.width - offset, y: offset },
      east:       { x: rect.width - offset, y: cy },
      southeast:  { x: rect.width - offset, y: rect.height - offset },
      south:      { x: cx,           y: rect.height - offset },
      southwest:  { x: offset,       y: rect.height - offset },
      west:       { x: offset,       y: cy },
      northwest:  { x: offset,       y: offset }
    };

    // compute which real compass each of your 4 labels maps to after rotation
    const rotatedMap = allDirs
      .map((dir, i) => allDirs[(i + rotationIndex) % 8]);

    // Show/hide & reposition
    allDirs.forEach(dir => {
      const el = labels[dir];
      if (!el) return;
      // In 4‑mode, only show cardinal dirs
      if (mode === "4" && ["northeast","southeast","southwest","northwest"].includes(dir)) {
        el.classList.remove("show");
        setTimeout(() => el.style.display = "none", 400); // wait for fade-out
      } else {
        // figure out which rotated direction this label is
        // rotatedMap gives the compass that "northLabel1" now represents
        const idx = allDirs.indexOf(dir);
        const compass = rotatedMap[idx];
        const pos = positions[compass];
        const clamp = (value, min, max) => Math.max(min, Math.min(max, value));
        const safeX = clamp(pos.x, 10, rect.width - 10);  // prevent overflow to the right
        const safeY = clamp(pos.y, 10, rect.height - 10); // prevent overflow to the bottom

        el.className = 'label ' + compass; 
        el.style.display = (mode==='4' && ['northeast','southeast','southwest','northwest'].includes(compass))
                   ? 'none' : 'block';
        el.style.display = "block";
        setTimeout(() => el.classList.add("show"), 10); // trigger fade-in
      }
    });
  };

  arrow.addEventListener("click", () => {
    rotationIndex = (rotationIndex + 1);
    arrow.style.transform = `rotate(${rotationIndex * 45}deg)`;
    updateLabelPositions();
  });

  // also re‑draw when user flips 4⇄8
  document.getElementById("directionCount")
    .addEventListener("change", updateLabelPositions);

  // initial draw
  updateLabelPositions();
}

      // Initialize for both containers
      setupRotatingArrow("arrow1", "rectangleContainer", {
  north: "northLabel1", northeast:"northeastLabel1",
  east: "eastLabel1",   southeast:"southeastLabel1",
  south: "southLabel1", southwest:"southwestLabel1",
  west: "westLabel1",   northwest:"northwestLabel1"
});

setupRotatingArrow("arrow2", "squareContainer", {
  north: "northLabel2", northeast:"northeastLabel2",
  east: "eastLabel2",   southeast:"southeastLabel2",
  south: "southLabel2", southwest:"southwestLabel2",
  west: "westLabel2",   northwest:"northwestLabel2"
});

      // whenever the user toggles 4 vs 8, restart both arrows to reset positions
      dirCountSelect.addEventListener("change", () => {
        // re‐run the shape toggle so the visible container's arrow is reset
        toggleShape();
        // re‐initialize both arrows so rotationIndex goes back to 0
        setupRotatingArrow("arrow1", "rectangleContainer", { north:"northLabel1", east:"eastLabel1", south:"southLabel1", west:"westLabel1" });
        setupRotatingArrow("arrow2", "squareContainer",    { north:"northLabel2", east:"eastLabel2", south:"southLabel2", west:"westLabel2" });
      });

      function markRoadDirection(containerId, labelIds, roadDirection) {
        if (!roadDirection) return;

        const key = roadDirection.toLowerCase().replace(/[-\s]/g, ""); // normalize

        console.log("Normalized key:", key); // debug
        console.log("Looking for element ID:", labelIds[key]); // debug

        const labelEl = document.getElementById(labelIds[key]);
        if (!labelEl) return;

        // add a star if not already present
        if (!labelEl.querySelector(".star-icon")) {
          const star = document.createElement("span");
          star.className = "star-icon";
          star.style.color = "red";
          star.style.fontWeight = "bold";
          star.style.marginLeft = "4px";
          star.innerText = "★";
          labelEl.appendChild(star);
        }
      }


       markRoadDirection("rectangleContainer", {
          north:     "northLabel1",
          northeast: "northeastLabel1",
          east:      "eastLabel1",
          southeast: "southeastLabel1",
          south:     "southLabel1",
          southwest: "southwestLabel1",
          west:      "westLabel1",
          northwest: "northwestLabel1"
        }, "{{ data.plotDetails.roadDirection }}");

        markRoadDirection("squareContainer", {
          north:     "northLabel2",
          northeast: "northeastLabel2",
          east:      "eastLabel2",
          southeast: "southeastLabel2",
          south:     "southLabel2",
          southwest: "southwestLabel2",
          west:      "westLabel2",
          northwest: "northwestLabel2"
        }, "{{ data.plotDetails.roadDirection }}");




        // THE QR CODE SCANNER 
        document.addEventListener("DOMContentLoaded", function () {
        const cloudinaryURL = "{{ data.documentLink }}";  // Injected from Django context
        const qrContainer = document.getElementById("qrContainer");
        qrContainer.innerHTML = ""; // Clear previous content

        if (cloudinaryURL && cloudinaryURL.trim() !== "") {
          new QRCode(qrContainer, {
            text: "https://china-rimless-tad.ngrok-free.dev"+cloudinaryURL,
            width: 128,
            height: 128,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
          });
        } else {
          qrContainer.textContent = "No Documents Available";
          qrContainer.style.fontSize = "14px";
          qrContainer.style.color = "#888";
          qrContainer.style.fontStyle = "italic";
        }
      });
        
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
